<!DOCTYPE HTML>
<html>

    <head>
        <link rel="stylesheet" href="../style.css">
        <link rel="stylesheet" href="../hilite.css">
        <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>
        <script src="sketch.js" type="text/javascript"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
        <script type="text/javascript"
            src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
            </script>
    </head>

    <body>
        <div class="main">
            <div id="sketch-holder">
                <!-- Our sketch will go here! -->
            </div>
            <div class="text"><h1>Follow mouse</h1>
<p>マウスポインタの位置に〇を描くだけの10行ほどの短いプログラムです。</p>
<p>ざっくりと説明します。</p>
<h2>setup</h2>
<p>関数<code>setup()</code>には、初期設定を書いておきます。この関数は、アニメーションをはじめる前に、一度だけ実行されます。</p>
<div class="codehilite"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">setup</span><span class="p">(){</span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createCanvas</span><span class="p">(</span><span class="mf">600</span><span class="p">,</span><span class="mf">600</span><span class="p">)</span>
<span class="w">    </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="s1">&#39;sketch-holder&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="nx">frameRate</span><span class="p">(</span><span class="mf">30</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p>1行目で幅600ピクセル、高さ600ピクセルのcanvas(絵を描くスペース)を準備します。</p>
<p>2行目で、それをウェブページの'sketch-holder'という場所に割りつけます。</p>
<p>3行目で、アニメーションを毎秒30コマで再生することを指示しています。(テレビのコマ数と同じです。)</p>
<h2>draw</h2>
<p>関数<code>draw()</code>は、1コマ1コマの描き方を指示する関数です。この関数は、毎秒30回呼びだされます。</p>
<div class="codehilite"><pre><span></span><code><span class="kd">function</span><span class="w"> </span><span class="nx">draw</span><span class="p">(){</span>
<span class="w">    </span><span class="c1">// 表示</span>
<span class="w">    </span><span class="nx">background</span><span class="p">(</span><span class="mf">200</span><span class="p">)</span>
<span class="w">    </span><span class="nx">stroke</span><span class="p">(</span><span class="mf">0</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fill</span><span class="p">(</span><span class="mf">255</span><span class="p">)</span>
<span class="w">    </span><span class="nx">ellipse</span><span class="p">(</span><span class="nx">mouseX</span><span class="p">,</span><span class="nx">mouseY</span><span class="p">,</span><span class="mf">20</span><span class="p">,</span><span class="mf">20</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>

<p><code>//</code>以降はコメントとみなされ、無視されます。プログラム内に覚えがきを残しておくと、読みやすくなります。</p>
<p>2行目で、背景色を明るさ200/255の淡いグレーにしています。カラーにしたい場合は、赤、緑、青の3原色の強さをそれぞれ0〜255で指定します。<code>background()</code>を省略すると、次のコマを描く時に前のコマの絵を消さないので、どんどん重ね描きされます。</p>
<p>3行目で、線の色を黒に指定しています。</p>
<p>4行目で、塗り色を白に指定しています。</p>
<p>5行目で、マウスの位置に幅20ピクセル、高さ20ピクセルの楕円(円)を描いています。</p>
<h2>改造してみよう</h2>
<ol>
<li>
<p>背景色の指定をなくしてみて下さい。</p>
</li>
<li>
<p>円の塗り色が、時間変化するようにして下さい。変数<code>frameCount</code>には、今描いているコマ数が自動的に設定されています。これを使って、赤緑青の強度を次のように設定します。</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="nx">R</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">frameCount</span><span class="o">*</span><span class="mf">2</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">256</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">G</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">frameCount</span><span class="o">*</span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">256</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">frameCount</span><span class="o">*</span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mf">256</span>
<span class="nx">fill</span><span class="p">(</span><span class="nx">R</span><span class="p">,</span><span class="nx">G</span><span class="p">,</span><span class="nx">B</span><span class="p">)</span>
</code></pre></div>

<p>ほかにも何百もの描画命令が準備されています。<a href="https://p5js.org/reference/">p5js Reference</a>を参照して下さい。</p>
</div>
</div>
</body>

</html>