<!DOCTYPE HTML>
<html>

    <head>
        <link rel="stylesheet" href="../style.css">
        <link rel="stylesheet" href="../hilite.css">
        <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>
        <script src="sketch.js" type="text/javascript"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
        <script type="text/javascript"
            src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
            </script>
    </head>

    <body>
        <div class="main">
            <div id="sketch-holder">
                <!-- Our sketch will go here! -->
            </div>
            <div class="text"><ul>
<li><a href="..">Index</a></li>
<li><a href="https://github.com/vitroid/p5js/blob/main/blockbuster/sketch.js">コード</a></li>
</ul>
<h1>Blockbuster</h1>
<p>物体の運動のしかたを、コンピュータで再現する一番簡単な例として、剛体球の運動を表現してみましょう。</p>
<p>剛体球とは、パチンコ玉やビリヤードの玉のように、硬い球のことです。</p>
<p>最初から三次元の運動を考えるのは難しいので、まず二次元の「剛体円盤」(hard-disk)一つだけの運動を考えます。</p>
<ul>
<li>円盤は位置$(x,y)$と速度$(v_x, v_y)$を持ちます。</li>
<li>速度に時間をかけると、移動距離が得られます。</li>
<li>円盤は、
        何も力を受けない物体は等速直進運動して、画面の外まで飛んでいくので、ウィンドウにぶつかったらはねかえるように
        衝突判定を行います。</li>
<li>時間$dt$ごとに表示します。$dt$のあいだに、円盤は$(v_x\cdot dt, v_y\cdot dt)$だけ前進します。その間に壁にぶつかった場合は、<ol>
<li>壁にぶつかるまでの時間$dt_1$を計算します。壁は上下左右に4枚あるので、そのなかで一番最初にぶつかるものを選びます。</li>
<li>円盤を$dt_1$だけ動かします。これにより、円盤は壁に接します。</li>
<li>壁に垂直な速度成分を反転させます。例えば、垂直の壁にぶつかる場合は、$x$方向の速度$v_x$の符号を反転させます。$v_y$には影響はありません。</li>
<li>衝突後の残り時間$dt-dt_1$のあいだに、また壁と衝突しないかを、1にもどって調べます。</li>
<li>衝突しない場合は、そのまま円盤を直進させます。(座標に$(v_x\cdot dt, v_y\cdot dt)$を加えます。)</li>
</ol>
</li>
</ul>
<h2>改造してみよう</h2>
<p>円盤の動きがわかりやすいように、毎秒1コマずつ表示するようになっています。以下の部分を修正して毎秒30コマでなめらかに動くようにして下さい。</p>
<pre class="codehilite"><code class="language-javascript">frameRate(1)
</code></pre>

<p>動きが速すぎる場合は、$dt$の値を小さめにしましょう。</p>
<pre class="codehilite"><code class="language-javascript">const dt = 10
</code></pre>

<p><a href="../airhockey">次: airhockey</a></p>
</div>
</div>
</body>

</html>