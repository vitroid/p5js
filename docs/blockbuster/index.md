# Blockbuster

物体の運動のしかたを、コンピュータで再現する一番簡単な例として、剛体球の運動を表現してみましょう。

剛体球とは、パチンコ玉やビリヤードの玉のように、硬い球のことです。

最初から三次元の運動を考えるのは難しいので、まず二次元の「剛体円盤」(hard-disk)一つだけの運動を考えます。

* 円盤は位置$(x,y)$と速度$(v_x, v_y)$を持ちます。
* 速度に時間をかけると、移動距離が得られます。
* 円盤は、
        何も力を受けない物体は等速直進運動して、画面の外まで飛んでいくので、ウィンドウにぶつかったらはねかえるように
        衝突判定を行います。
* 時間$dt$ごとに表示します。$dt$のあいだに、円盤は$(v_x\cdot dt, v_y\cdot dt)$だけ前進します。その間に壁にぶつかった場合は、
    1. 壁にぶつかるまでの時間$dt_1$を計算します。壁は上下左右に4枚あるので、そのなかで一番最初にぶつかるものを選びます。
    2. 円盤を$dt_1$だけ動かします。これにより、円盤は壁に接します。
    3. 壁に垂直な速度成分を反転させます。例えば、垂直の壁にぶつかる場合は、$x$方向の速度$v_x$の符号を反転させます。$v_y$には影響はありません。
    4. 衝突後の残り時間$dt-dt_1$のあいだに、また壁と衝突しないかを、1にもどって調べます。
    5. 衝突しない場合は、そのまま円盤を直進させます。(座標に$(v_x\cdot dt, v_y\cdot dt)$を加えます。)

## 改造してみよう

円盤の動きがわかりやすいように、毎秒1コマずつ表示するようになっています。以下の部分を修正して毎秒30コマでなめらかに動くようにして下さい。

```
frameRate(1)
```

動きが速すぎる場合は、$dt$の値を小さめにしましょう。

```
const dt = 10
```
